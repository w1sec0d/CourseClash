exports.id=164,exports.ids=[164],exports.modules={4184:(e,s,r)=>{"use strict";r.d(s,{ConditionalLayout:()=>C});var t=r(60687),a=r(43210),o=r(31353),l=r(16189),n=r(85814),i=r.n(n),d=r(78272),c=r(58869),m=r(40083);let h=({user:e,onLogout:s})=>{let[r,o]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"items-center mb-2 flex space-x-3 cursor-pointer",onClick:()=>{o(!r)},children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-600 flex items-center justify-center text-white font-semibold",children:e?.username?e.username.charAt(0).toUpperCase():"U"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("p",{className:"font-medium text-emerald-800",children:e?.username||"Usuario"}),(0,t.jsx)(d.A,{size:16,className:`ml-1 transition-transform ${r?"transform rotate-180":""}`})]}),(0,t.jsxs)("div",{className:"items-center flex",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"})}),(0,t.jsxs)("span",{className:"text-sm ml-1",children:["Nivel ",e?.role||"Usuario"]})]})]})]}),r&&(0,t.jsxs)("div",{className:"absolute w-full mt-1 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-50",children:[(0,t.jsxs)(i(),{href:"/perfil",className:"px-4 py-2 hover:bg-emerald-50 flex items-center",children:[(0,t.jsx)(c.A,{size:16,className:"mr-2 text-emerald-600"}),(0,t.jsx)("span",{children:"Mi Perfil"})]}),(0,t.jsxs)("button",{onClick:()=>s(),className:"w-full text-left px-4 py-2 hover:bg-emerald-50 flex items-center text-red-600",children:[(0,t.jsx)(m.A,{size:16,className:"mr-2"}),(0,t.jsx)("span",{children:"Cerrar Sesi\xf3n"})]})]})]})},u=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"items-center mb-4 flex space-x-3",children:(0,t.jsxs)("div",{className:"items-center bg-emerald-600 rounded-full px-3 py-2 text-white flex w-full",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("span",{className:"font-medium",children:[500," Monedas"]})]})}),(0,t.jsx)("div",{className:"items-center mb-4 flex",children:(0,t.jsxs)("button",{type:"button",className:"relative w-full p-2 hover:bg-emerald-50 transition rounded-lg flex items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-emerald-700 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,t.jsx)("span",{className:"font-medium",children:"Notificaciones"}),(0,t.jsx)("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 items-center justify-center text-xs absolute right-2 flex",children:3})]})})]}),x=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i(),{href:"/dashboard",className:"items-center px-4 py-2 rounded-lg bg-emerald-100 text-emerald-800 flex space-x-3",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"font-medium",children:"Inicio"})]}),(0,t.jsxs)(i(),{href:"/tienda",className:"items-center px-4 py-2 rounded-lg flex space-x-3 hover:bg-emerald-50 transition",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 11V9a2 2 0 00-2-2m2 4v4a2 2 0 104 0v-1m-4-3H9m2 0h4m6 1a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{className:"font-medium",children:"Tienda de Bonos"})]})]}),p=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(i(),{href:"/duelos",className:"items-center px-4 py-2 rounded-lg flex space-x-3 hover:bg-emerald-50 transition",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(0,t.jsx)("span",{className:"font-medium",children:"Duelos Acad\xe9micos"})]})}),f=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"my-5 border-gray-200"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-500 px-4 mb-2",children:"Mis Cursos"}),(0,t.jsxs)(i(),{href:"/curso/matematicas",className:"items-center px-4 py-2 rounded-lg bg-emerald-50 text-emerald-700 flex space-x-3 hover:bg-emerald-100 transition",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),(0,t.jsx)("span",{children:"Matem\xe1ticas Discretas"})]}),(0,t.jsxs)(i(),{href:"/curso/paradigmas",className:"items-center px-4 py-2 rounded-lg flex space-x-3 hover:bg-emerald-50 transition",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),(0,t.jsx)("span",{children:"Paradigmas de Programaci\xf3n"})]}),(0,t.jsxs)(i(),{href:"/curso/algoritmos",className:"items-center px-4 py-2 rounded-lg flex space-x-3 hover:bg-emerald-50 transition",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),(0,t.jsx)("span",{children:"Algoritmos Avanzados"})]})]})]});function g({onClose:e}){let{user:s,logout:a}=(0,o.$)(),n=(0,l.useRouter)(),i=async()=>{try{return console.log("\uD83D\uDEAA Sidebar logout attempt with Apollo"),await a(),console.log("✅ Sidebar logout successful with Apollo"),n.push("/"),e(),!0}catch(t){console.error("❌ Sidebar logout error:",t);let{clearAuthTokens:s}=await Promise.resolve().then(r.bind(r,30936));return s(),console.log("\uD83E\uDDF9 Cleaned cookies manually after logout error"),n.push("/"),e(),!1}};return(0,t.jsx)("div",{className:"h-full w-64 bg-white shadow-lg lg:translate-x-0 fixed left-0 top-16 border-r border-gray-200 transform -translate-x-full transition-transform duration-300 z-40",id:"sidebar",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)(h,{user:s,onLogout:i}),(0,t.jsx)(u,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x,{}),(0,t.jsx)(p,{})]}),(0,t.jsx)(f,{})]})})}let v=()=>{let{isAuthenticated:e}=(0,o.$)(),s=(0,l.usePathname)(),[r,n]=(0,a.useState)(!1),i=e&&(s?.startsWith("/curso")||s?.startsWith("/dashboard")||s?.startsWith("/perfil"));return((0,a.useEffect)(()=>{let e=document.getElementById("sidebar"),s=()=>{n(!!e?.classList.contains("translate-x-0"))};if(s(),e){let r=new MutationObserver(s);return r.observe(e,{attributes:!0,attributeFilter:["class"]}),()=>r.disconnect()}},[]),i)?(0,t.jsx)("div",{className:`bg-black lg:hidden fixed inset-0 bg-opacity-50 z-30 transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,id:"sidebarOverlay","aria-hidden":!r,onClick:()=>{let e=document.getElementById("sidebar");e?.classList.remove("translate-x-0"),e?.classList.add("-translate-x-full"),n(!1)}}):null};var w=r(49384),j=r(82136);let b=()=>(0,t.jsx)("footer",{className:"bg-emerald-800 text-white",children:(0,t.jsxs)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-7xl",children:[(0,t.jsxs)("div",{className:"md:grid-cols-2 lg:grid-cols-4 grid grid-cols-1 gap-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xl font-bold mb-4",children:"Course Clash"}),(0,t.jsx)("p",{className:"text-emerald-200 mb-4",children:"Transforma tu experiencia de aprendizaje en una aventura competitiva y divertida."}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)("a",{href:"#",className:"text-emerald-200 hover:text-white transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Facebook"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),(0,t.jsxs)("a",{href:"#",className:"text-emerald-200 hover:text-white transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Instagram"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]}),(0,t.jsxs)("a",{href:"#",className:"text-emerald-200 hover:text-white transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Twitter"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-semibold mb-4",children:"Plataforma"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/caracteristicas",className:"text-emerald-200 hover:text-white transition-colors",children:"Caracter\xedsticas"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/duelos",className:"text-emerald-200 hover:text-white transition-colors",children:"Duelos"})})]})]})]}),(0,t.jsx)("div",{className:"mt-12 pt-8 border-t border-emerald-700",children:(0,t.jsxs)("p",{className:"text-emerald-200 text-center",children:["\xa9 ",new Date().getFullYear()," Course Clash. Todos los derechos reservados."]})})]})});function N(){let{isAuthenticated:e}=(0,o.$)(),s=(0,l.usePathname)();return e&&(s?.startsWith("/curso")||s?.startsWith("/dashboard")||s?.startsWith("/perfil"))?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("aside",{className:"hidden lg:block w-64 fixed top-16 left-0 h-[calc(100vh-4rem)] z-40",children:(0,t.jsx)(g,{isOpen:!0,onClose:()=>{}})}),(0,t.jsx)(v,{})]}):null}function C({children:e}){let{isAuthenticated:s}=(0,o.$)(),r=(0,l.usePathname)(),n=s&&!["/","/login","/registro","/login-apollo","/ejemplo-ssr","/reset-password"].includes(r||"");return(0,t.jsxs)("div",{className:(0,w.A)("flex min-h-screen flex-col",n?"lg:pl-64":""),children:[(0,t.jsx)(N,{}),(0,t.jsxs)(a.Suspense,{fallback:(0,t.jsx)(j.A,{}),children:[(0,t.jsx)("main",{className:"w-full",children:e}),(0,t.jsx)(b,{})]})]})}},13003:(e,s,r)=>{"use strict";r.d(s,{ApolloProviderWrapper:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call ApolloProviderWrapper() from the server but ApolloProviderWrapper is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/lib/apollo-provider.tsx","ApolloProviderWrapper")},17163:(e,s,r)=>{Promise.resolve().then(r.bind(r,93111)),Promise.resolve().then(r.bind(r,32192)),Promise.resolve().then(r.bind(r,13003)),Promise.resolve().then(r.bind(r,97362))},30936:(e,s,r)=>{"use strict";r.d(s,{O5:()=>i,c4:()=>d,clearAuthTokens:()=>m,fE:()=>c});let t=(e,s,r)=>{},a=e=>null,o=e=>{},l="auth_token",n="refresh_token",i=e=>{t(l,e)},d=()=>a(l),c=e=>{t(n,e,{maxAge:2592e3})},m=()=>{o(l),o(n)}},31353:(e,s,r)=>{"use strict";r.d(s,{AuthProviderApollo:()=>g,$:()=>v});var t=r(60687),a=r(43210),o=r(92148),l=r(79826),n=r(15728),i=r(8829),d=r(30936);let c=(0,l.J1)`
  mutation Login($email: String!, $password: String!) {
    login(email: $email, password: $password) {
      __typename
      ... on AuthSuccess {
        user {
          id
          username
          email
          fullName
          avatar
          role
          createdAt
          updatedAt
        }
        token
        refreshToken
        expiresAt
      }
      ... on AuthError {
        message
        code
      }
    }
  }
`,m=(0,l.J1)`
  query Me {
    me {
      id
      username
      email
      fullName
      avatar
      role
      createdAt
      updatedAt
    }
  }
`,h=(0,l.J1)`
  mutation Logout {
    logout
  }
`,u=(0,l.J1)`
  mutation Register(
    $username: String!
    $email: String!
    $password: String!
    $fullName: String
    $role: UserRole
  ) {
    register(
      username: $username
      email: $email
      password: $password
      fullName: $fullName
      role: $role
    ) {
      __typename
      ... on AuthSuccess {
        user {
          id
          username
          email
          fullName
          avatar
          role
          createdAt
          updatedAt
        }
        token
        refreshToken
        expiresAt
      }
      ... on AuthError {
        message
        code
      }
    }
  }
`,x=(0,l.J1)`
  mutation ForgotPassword($email: String!) {
    forgotPassword(email: $email) {
      __typename
      ... on ForgotPasswordSuccess {
        message
        code
        token
      }
      ... on ForgotPasswordError {
        message
        code
      }
    }
  }
`,p=(0,l.J1)`
  mutation UpdatePassword(
    $newPassword: String!
    $code: String!
    $email: String!
  ) {
    updatePassword(newPassword: $newPassword, code: $code, email: $email) {
      __typename
      ... on UpdatePasswordSuccess {
        message
      }
      ... on UpdatePasswordError {
        message
        code
      }
    }
  }
`,f=(0,a.createContext)(void 0);function g({children:e}){let[s,r]=(0,a.useState)(!1),[l,g]=(0,a.useState)(!1),{login:v,loading:w}=function(){let[e,{loading:s,error:r}]=(0,n.n)(c),[t,l]=(0,a.useState)(null);return{login:async(s,r)=>{l(null);try{let{data:t}=await e({variables:{email:s,password:r}});if("AuthError"===t.login.__typename){console.log("\uD83D\uDD10 Authentication error:",t.login.code,t.login.message);let e=new o.l(t.login.message||"Error de autenticaci\xf3n",t.login.code,!1);return l(e.message),{error:e}}return console.log("✅ Login successful"),(0,d.O5)(t.login.token),t.login.refreshToken&&(0,d.fE)(t.login.refreshToken),{data:t.login}}catch(t){console.error("\uD83D\uDEA8 Server/Network error:",t);let e="SERVER_ERROR",s="Error del servidor. Intenta de nuevo m\xe1s tarde.";if(t&&"object"==typeof t&&"networkError"in t){let r=t.networkError;if(r?.statusCode)switch(r.statusCode){case 500:e="SERVER_ERROR",s="Error interno del servidor. Contacta al soporte t\xe9cnico.";break;case 503:e="SERVER_ERROR",s="Servicio temporalmente no disponible. Intenta m\xe1s tarde.";break;case 404:e="SERVER_ERROR",s="Servicio de autenticaci\xf3n no encontrado.";break;case 401:e="INVALID_CREDENTIALS",s="Credenciales inv\xe1lidas.";break;default:e="SERVER_ERROR",s=`Error de servidor (${r.statusCode}). Intenta m\xe1s tarde.`}else r?.code==="NETWORK_ERROR"?s="Error de conexi\xf3n. Verifica tu internet.":r?.code==="TIMEOUT"&&(s="Tiempo de espera agotado. Intenta de nuevo.")}else t&&"object"==typeof t&&"graphQLErrors"in t&&t.graphQLErrors&&t.graphQLErrors.length>0&&(s="Error en la consulta GraphQL.");let r=new o.l(s,e,!0);return l(r.message),{error:r}}},loading:s,error:t||r?.message||null}}(),{user:j,loading:b,fetchCurrentUser:N}=function(){let{data:e,loading:s,error:r,refetch:t}=(0,i.IT)(m,{skip:!0,errorPolicy:"all",notifyOnNetworkStatusChange:!0});return{user:e?.me,loading:s,error:r?.message||null,fetchCurrentUser:t}}(),{logout:C}=function(){let[e,{loading:s}]=(0,n.n)(h),[r,t]=(0,a.useState)(null);return{logout:async()=>{t(null);try{return await e(),(0,d.clearAuthTokens)(),!0}catch(e){return t(e instanceof Error?e.message:"Failed to logout"),(0,d.clearAuthTokens)(),!1}},loading:s,error:r}}(),{register:y,loading:A}=function(){let[e,{loading:s}]=(0,n.n)(u);return{register:async s=>{try{let{data:r}=await e({variables:s});if("AuthError"===r.register.__typename)throw new o.l(r.register.message||"Error al registrar usuario",r.register.code,!0);return(0,d.O5)(r.register.token),r.register.refreshToken&&(0,d.fE)(r.register.refreshToken),r.register}catch(e){if(e instanceof o.l)throw e;throw new o.l(e instanceof Error?e.message:"Error al registrar usuario","UNKNOWN_ERROR",!0)}},loading:s}}(),{requestPasswordReset:k,updatePassword:P}=function(){let[e,{loading:s}]=(0,n.n)(x),[r]=(0,n.n)(p);return{requestPasswordReset:async s=>{try{let{data:r}=await e({variables:{email:s}});if("ForgotPasswordError"===r.forgotPassword.__typename)throw new o.l(r.forgotPassword.message||"Error al solicitar recuperaci\xf3n",r.forgotPassword.code,!0);return r.forgotPassword}catch(e){if(e instanceof o.l)throw e;throw new o.l(e instanceof Error?e.message:"Error al solicitar recuperaci\xf3n","SERVER_ERROR",!0)}},updatePassword:async(e,s,t,a)=>{try{let{data:l}=await r({variables:{newPassword:e,code:s,email:t},context:{headers:{Authorization:`Bearer ${a}`}}});if("UpdatePasswordError"===l.updatePassword.__typename)throw new o.l(l.updatePassword.message||"Error al actualizar contrase\xf1a",l.updatePassword.code,!0);return l.updatePassword}catch(e){if(e instanceof o.l)throw e;throw new o.l(e instanceof Error?e.message:"Error al actualizar contrase\xf1a","SERVER_ERROR",!0)}},loading:s}}(),E=(0,a.useCallback)(async(e,s)=>{let r=await v(e,s);if("error"in r)throw r.error;return await N(),r.data},[v,N]),R=(0,a.useCallback)(async e=>{try{let s=await y(e);return await N(),s}catch(e){throw console.error("Auth context register error:",e),e}},[y,N]),L=(0,a.useCallback)(async()=>{let e=await C();return r(!1),e},[C]),S=(0,a.useCallback)(async e=>await k(e),[k]),$=(0,a.useCallback)(async(e,s,r,t)=>await P(e,s,r,t),[P]);return(0,t.jsx)(f.Provider,{value:{user:j,isLoading:b||w||A,isAuthenticated:s,isInitialized:l,login:E,register:R,logout:L,resetPassword:S,updatePassword:$},children:e})}function v(){let e=(0,a.useContext)(f);if(void 0===e)throw Error("useAuthApollo debe ser utilizado dentro de un AuthProviderApollo");return e}},32192:(e,s,r)=>{"use strict";r.d(s,{default:()=>a});var t=r(12907);(0,t.registerClientReference)(function(){throw Error("Attempted to call NavigationBar() from the server but NavigationBar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/components/NavigationBar.tsx","NavigationBar");let a=(0,t.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/carlos/dev/CourseClash/frontend/components/NavigationBar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/components/NavigationBar.tsx","default")},35037:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(37413);r(61120);let a=()=>(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-white backdrop-blur-sm z-50",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})});function o(){return(0,t.jsx)(a,{})}},40624:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},50352:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},56323:(e,s,r)=>{"use strict";r.d(s,{ApolloProviderWrapper:()=>p});var t=r(60687),a=r(38281),o=r(26408),l=r(1566),n=r(96457),i=r(39768),d=r(14744),c=r(42629);r(30936);let m=(0,o.$)({uri:"http://localhost:8080/api/graphql",credentials:"include"}),h=(0,d.o)((e,{headers:s})=>({headers:s})),u=(0,c.S)(({graphQLErrors:e,networkError:s})=>{e&&e.forEach(({message:e,locations:s,path:r})=>{console.error(`GraphQL error: Message: ${e}, Location: ${s}, Path: ${r}`)}),s&&(console.error(`Network error: ${s}`),"statusCode"in s&&s.statusCode)}),x=new n.R({link:(0,i.H)([u,h,m]),cache:new l.D({typePolicies:{User:{fields:{fullName:{read:(e,{readField:s})=>e||s("full_name")},createdAt:{read:(e,{readField:s})=>e||s("created_at")},updatedAt:{read:(e,{readField:s})=>e||s("updated_at")}}}}}),defaultOptions:{watchQuery:{errorPolicy:"all"},query:{errorPolicy:"all"}},ssrMode:!0});function p({children:e}){return(0,t.jsx)(a.X,{client:x,children:e})}},58014:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>h,metadata:()=>m});var t=r(37413),a=r(59258),o=r.n(a);r(82704);var l=r(32192),n=r(75986),i=r(97362),d=r(93111),c=r(13003);let m={title:"Course Clash - Transforma tu Aprendizaje en una Aventura",description:"Gamifica tu experiencia acad\xe9mica con duelos, logros y personalizaci\xf3n."};function h({children:e}){return(0,t.jsx)("html",{lang:"es",children:(0,t.jsx)("body",{className:(0,n.A)(o().className,"bg-white min-h-screen flex flex-col"),children:(0,t.jsx)(c.ApolloProviderWrapper,{children:(0,t.jsxs)(i.AuthProviderApollo,{children:[(0,t.jsx)(l.default,{}),(0,t.jsx)(d.ConditionalLayout,{children:e})]})})})})}},66834:(e,s,r)=>{"use strict";r.d(s,{default:()=>g});var t=r(60687),a=r(43210),o=r(85814),l=r.n(o),n=r(30474),i=r(49384),d=r(20816),c=r(64364),m=r(30793),h=r(45428),u=r(91028),x=r(67264),p=r(16189),f=r(31353);let g=()=>{let[e,s]=(0,a.useState)(!1),{isAuthenticated:o,logout:g,isInitialized:v}=(0,f.$)(),w=(0,p.useRouter)(),j=(0,p.usePathname)(),b=()=>{s(!e)},N=async()=>{try{console.log("\uD83D\uDEAA Logout attempt with Apollo"),await g(),console.log("✅ Logout successful with Apollo"),w.push("/")}catch(s){console.error("❌ Logout error:",s);let{clearAuthTokens:e}=await Promise.resolve().then(r.bind(r,30936));e(),console.log("\uD83E\uDDF9 Cleaned cookies manually after logout error"),w.push("/")}},C=e=>"/"===e?j===e:j.startsWith(e),y=e=>(0,i.A)("px-3 py-2 rounded-md text-sm font-medium flex items-center gap-2","transition-colors duration-200",C(e)?"bg-emerald-600 text-white":"text-white hover:bg-emerald-600");return v?(0,t.jsxs)("nav",{className:"bg-emerald-700 shadow-lg sticky top-0 z-50",children:[(0,t.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-2 max-w-7xl",children:(0,t.jsxs)("div",{className:"items-center justify-between h-16 flex",children:[(0,t.jsxs)("div",{className:"items-center flex",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[(0,t.jsx)(n.default,{alt:"Logo de Course Clash - Espada insertada en un birrete de graduaci\xf3n",src:"/logo_no_title.svg",className:"h-21 w-auto mr-1",width:200,height:80,priority:!0}),(0,t.jsx)("span",{className:"text-white font-bold text-xl tracking-tight",children:"CourseClash"})]}),(0,t.jsx)("div",{className:"md:block hidden",children:(0,t.jsxs)("div",{className:"ml-10 items-baseline flex space-x-4",children:[(0,t.jsxs)(l(),{href:"/",className:y("/"),children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),"Inicio"]}),(0,t.jsxs)(l(),{href:"/#caracteristicas",className:y("/#caracteristicas"),children:[(0,t.jsx)(c.A,{className:"h-5 w-5"}),"Caracter\xedsticas"]}),(0,t.jsxs)(l(),{href:"/duelos",className:y("/duelos"),children:[(0,t.jsx)(m.A,{className:"h-5 w-5"}),"Duelos"]}),(0,t.jsxs)(l(),{href:"/dashboard",className:y("/dashboard"),children:[(0,t.jsx)(h.A,{className:"h-5 w-5"}),"Mis Cursos"]})]})})]}),(0,t.jsx)("div",{className:"md:block hidden",children:(0,t.jsx)("div",{className:"ml-4 items-center md:ml-6 flex space-x-3",children:o?(0,t.jsxs)("button",{onClick:N,className:(0,i.A)("bg-emerald-500 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2","hover:bg-emerald-400 transition-colors duration-300 hover:cursor-pointer"),children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),"Cerrar Sesi\xf3n"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{href:"/login",className:(0,i.A)("bg-emerald-500 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2","hover:bg-emerald-400 transition-colors duration-300"),children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),"Iniciar Sesi\xf3n"]}),(0,t.jsxs)(l(),{href:"/registro",className:(0,i.A)("bg-white text-emerald-700 px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2","hover:bg-gray-100 border border-emerald-700 transition-colors duration-300"),children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),"Registrarse"]})]})})}),(0,t.jsx)("div",{className:"md:hidden -mr-2 flex",children:(0,t.jsx)("button",{type:"button",onClick:b,className:(0,i.A)("inline-flex p-2 bg-emerald-600 items-center justify-center rounded-md text-white","hover:bg-emerald-500 focus:outline-none"),children:(0,t.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),e&&(0,t.jsxs)("div",{className:"md:hidden bg-emerald-700",children:[(0,t.jsxs)("div",{className:"px-2 pt-2 pb-3 sm:px-3 space-y-1",children:[(0,t.jsxs)(l(),{href:"/#inicio",className:y("/"),children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),"Inicio"]}),(0,t.jsxs)(l(),{href:"/#caracteristicas",className:y("/#caracteristicas"),children:[(0,t.jsx)(c.A,{className:"h-5 w-5"}),"Caracter\xedsticas"]}),(0,t.jsxs)(l(),{href:"/duelos",className:y("/duelos"),children:[(0,t.jsx)(m.A,{className:"h-5 w-5"}),"Duelos"]}),(0,t.jsxs)(l(),{href:"/dashboard",className:y("/dashboard"),children:[(0,t.jsx)(h.A,{className:"h-5 w-5"}),"Mis Cursos"]})]}),(0,t.jsx)("div",{className:"pt-4 pb-3 border-t border-emerald-600",children:o?(0,t.jsx)("div",{className:"px-5",children:(0,t.jsxs)("button",{onClick:N,className:(0,i.A)("bg-emerald-500 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2","w-full text-center hover:bg-emerald-400 hover:cursor-pointer"),children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),"Cerrar Sesi\xf3n"]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"items-center px-5 flex space-x-3",children:(0,t.jsxs)(l(),{href:"/login",className:(0,i.A)("bg-emerald-500 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2","w-full text-center hover:bg-emerald-400 hover:cursor-pointer"),children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),"Iniciar Sesi\xf3n"]})}),(0,t.jsx)("div",{className:"mt-3 px-5",children:(0,t.jsxs)(l(),{href:"/registro",className:(0,i.A)("bg-white text-emerald-700 px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2","w-full text-center hover:bg-gray-100 border border-emerald-700 block"),children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),"Registrarse"]})})]})})]})]}):(0,t.jsx)("nav",{className:"bg-emerald-700 shadow-lg sticky top-0 z-50",children:(0,t.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl",children:(0,t.jsxs)("div",{className:"items-center justify-between h-16 flex",children:[(0,t.jsxs)("div",{className:"items-center flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(n.default,{alt:"Logo de Course Clash",src:"/logo_no_title.svg",className:"h-12 w-auto",width:64,height:64,priority:!0})}),(0,t.jsx)("div",{className:"md:block hidden",children:(0,t.jsxs)("div",{className:"ml-10 items-baseline flex space-x-4",children:[(0,t.jsxs)(l(),{href:"/",className:y("/"),children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),"Inicio"]}),(0,t.jsxs)(l(),{href:"/#caracteristicas",className:y("/#caracteristicas"),children:[(0,t.jsx)(c.A,{className:"h-5 w-5"}),"Caracter\xedsticas"]}),(0,t.jsxs)(l(),{href:"/duelos",className:y("/duelos"),children:[(0,t.jsx)(m.A,{className:"h-5 w-5"}),"Duelos"]}),(0,t.jsxs)(l(),{href:"/dashboard",className:y("/dashboard"),children:[(0,t.jsx)(h.A,{className:"h-5 w-5"}),"Mis Cursos"]})]})})]}),(0,t.jsx)("div",{className:"md:block hidden",children:(0,t.jsx)("div",{className:"ml-4 items-center md:ml-6 flex space-x-3",children:(0,t.jsx)("div",{className:"h-10 w-32 bg-emerald-600 animate-pulse rounded-md"})})}),(0,t.jsx)("div",{className:"md:hidden -mr-2 flex",children:(0,t.jsx)("button",{type:"button",onClick:b,className:(0,i.A)("inline-flex p-2 bg-emerald-600 items-center justify-center rounded-md text-white","hover:bg-emerald-500 focus:outline-none"),children:(0,t.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]})})})}},78335:()=>{},82136:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});var t=r(60687);r(43210);let a=()=>(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-white backdrop-blur-sm z-50",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})})},82704:()=>{},92148:(e,s,r)=>{"use strict";r.d(s,{l:()=>t});class t extends Error{constructor(e,s="UNKNOWN_ERROR",r){super(e),this.code=s,this.name="AuthError",Object.setPrototypeOf(this,t.prototype),this.isServerError=r??!1}}},93111:(e,s,r)=>{"use strict";r.d(s,{ConditionalLayout:()=>a});var t=r(12907);(0,t.registerClientReference)(function(){throw Error("Attempted to call ConditionalSidebar() from the server but ConditionalSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/components/ConditionalLayout.tsx","ConditionalSidebar");let a=(0,t.registerClientReference)(function(){throw Error("Attempted to call ConditionalLayout() from the server but ConditionalLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/components/ConditionalLayout.tsx","ConditionalLayout");(0,t.registerClientReference)(function(){throw Error("Attempted to call LoadingOverlay() from the server but LoadingOverlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/components/ConditionalLayout.tsx","LoadingOverlay")},93187:(e,s,r)=>{Promise.resolve().then(r.bind(r,4184)),Promise.resolve().then(r.bind(r,66834)),Promise.resolve().then(r.bind(r,56323)),Promise.resolve().then(r.bind(r,31353))},96487:()=>{},97362:(e,s,r)=>{"use strict";r.d(s,{AuthProviderApollo:()=>a});var t=r(12907);let a=(0,t.registerClientReference)(function(){throw Error("Attempted to call AuthProviderApollo() from the server but AuthProviderApollo is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/lib/auth-context-apollo.tsx","AuthProviderApollo");(0,t.registerClientReference)(function(){throw Error("Attempted to call useAuthApollo() from the server but useAuthApollo is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/lib/auth-context-apollo.tsx","useAuthApollo")}};