(()=>{var e={};e.id=371,e.ids=[371],e.modules={829:(e,r,s)=>{Promise.resolve().then(s.bind(s,58972))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15787:(e,r,s)=>{"use strict";s.d(r,{default:()=>o});var t=s(60687);s(43210);var l=s(85814),a=s.n(l),n=s(49384);let o=({children:e,variant:r="primary",href:s,onClick:l,className:o="",type:i="button",disabled:d=!1})=>{let c=`items-center justify-center px-8 py-3 text-base font-medium rounded-md inline-flex 
    transition-all duration-300 ease-in-out transform 
    hover:scale-105 hover:shadow-lg active:scale-95 active:opacity-80 
    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 
    disabled:opacity-50 disabled:cursor-not-allowed 
    relative z-10 hover:cursor-pointer`,u={primary:`text-white bg-emerald-600 border border-transparent 
      hover:bg-emerald-700 hover:shadow-lg active:bg-emerald-500`,secondary:`text-emerald-600 bg-white border border-emerald-600 
      hover:bg-emerald-50 hover:shadow-sm active:bg-emerald-100`},m=(0,n.A)(c,u[r],o,d&&"opacity-50 cursor-not-allowed");return s?(0,t.jsx)(a(),{href:s,className:m,children:e}):(0,t.jsx)("button",{type:i,className:m,onClick:l,disabled:d,children:e})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19241:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>S});var t=s(60687),l=s(43210);function a({questionNumber:e,totalQuestions:r,question:s,options:a,onAnswerSelect:n}){let[o,i]=(0,l.useState)(null),d=(e,r)=>{null===o&&(i(e),n(r))};return(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg mb-6 p-6 border-2 border-emerald-300",children:[(0,t.jsx)("div",{className:"justify-between mb-3 flex",children:(0,t.jsxs)("span",{className:"bg-emerald-600 text-white px-4 py-1 rounded-full text-sm font-semibold",children:["Pregunta ",e," de ",r]})}),(0,t.jsx)("p",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-6",children:s}),(0,t.jsx)("div",{className:"md:grid-cols-2 grid grid-cols-1 gap-4",children:a.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>d(e.letter,e.text),disabled:null!==o,className:`answer-option border-2 p-4 transition-all duration-200 transform
              bg-white text-gray-700 rounded-lg text-left
              ${null===o?"hover:bg-emerald-50 border-emerald-300 hover:border-emerald-500 hover:-translate-y-1 hover:shadow-md":o===e.letter?"border-emerald-500 bg-emerald-50":"border-gray-200 opacity-50 cursor-not-allowed"}`,children:[(0,t.jsx)("span",{className:`w-8 h-8 rounded-full text-center font-bold leading-8 mr-2 inline-block
                ${o===e.letter?"bg-emerald-500 text-white":"bg-emerald-100 text-emerald-700"}`,children:e.letter}),(0,t.jsx)("span",{className:"font-medium",children:e.text})]},e.letter))})]})}function n({title:e,opponent:r,playerProgress:s,totalQuestions:l}){return(0,t.jsxs)("div",{className:"bg-emerald-100 rounded-lg mb-6 shadow-sm p-4",children:[(0,t.jsx)("div",{className:"justify-between items-center flex",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xl font-bold text-emerald-800",children:e}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Vs. ",r]})]})}),(0,t.jsxs)("div",{className:"mt-4 items-center justify-between flex",children:[(0,t.jsxs)("div",{className:"items-center mr-4 flex space-x-2 flex-1",children:[(0,t.jsx)("div",{className:"h-3 bg-emerald-200 rounded-full flex-grow",children:(0,t.jsx)("div",{style:{width:`${s/l*100}%`},className:"h-3 bg-emerald-500 rounded-full"})}),(0,t.jsxs)("span",{className:"font-medium text-gray-700",children:[s,"/",l]})]}),(0,t.jsx)("div",{className:"items-center flex space-x-2 flex-1"})]})]})}let o=l.forwardRef(function({title:e,titleId:r,...s},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),e?l.createElement("title",{id:r},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"}))});var i=s(30793);let d=l.forwardRef(function({title:e,titleId:r,...s},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),e?l.createElement("title",{id:r},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});function c({results:e,playerId:r,opponentId:s}){let l=e.winner_id===r,a=r===e.player1_id;console.log("playerId",r),console.log("results.player1_id",e.player1_id),console.log("opponentId",s),console.log("isWinner",l),console.log("isPlayer1",a);let n=a?e.player1_score:e.player2_score,c=a?e.player2_score:e.player1_score,u=a?e.player1_elo:e.player2_elo,m=a?e.player2_elo:e.player1_elo,x=a?e.player1_rank:e.player2_rank,h=a?e.player2_rank:e.player1_rank;return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:e.is_draw?(0,t.jsx)(o,{className:"h-16 w-16 text-yellow-500"}):l?(0,t.jsx)(i.A,{className:"h-16 w-16 text-emerald-500"}):(0,t.jsx)(d,{className:"h-16 w-16 text-red-500"})}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:e.is_draw?"\xa1Empate!":l?"\xa1Victoria!":"Derrota"}),(0,t.jsx)("p",{className:"text-gray-600",children:e.is_draw?"Ambos jugadores han empatado":l?"\xa1Has ganado el duelo!":"Tu oponente ha ganado el duelo"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-emerald-800 mb-4",children:"Tus Resultados"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Puntuaci\xf3n:"}),(0,t.jsxs)("span",{className:`font-semibold ${n>=0?"text-emerald-600":"text-red-600"}`,children:[n>0?"+":"",n]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Rango:"}),(0,t.jsx)("span",{className:"font-semibold text-emerald-800",children:x})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"ELO:"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"font-semibold text-emerald-800",children:u.current}),(0,t.jsxs)("span",{className:`ml-2 ${u.change>=0?"text-emerald-600":"text-red-600"}`,children:["(",u.change>0?"+":"",u.change,")"]})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Resultados del Oponente"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Puntuaci\xf3n:"}),(0,t.jsxs)("span",{className:`font-semibold ${c>=0?"text-emerald-600":"text-red-600"}`,children:[c>0?"+":"",c]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Rango:"}),(0,t.jsx)("span",{className:"font-semibold text-gray-800",children:h})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"ELO:"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-800",children:m.current}),(0,t.jsxs)("span",{className:`ml-2 ${m.change>=0?"text-emerald-600":"text-red-600"}`,children:["(",m.change>0?"+":"",m.change,")"]})]})]})]})]})]}),(0,t.jsx)("div",{className:"mt-8 text-center",children:(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Volver a Jugar"})})]})})}function u({wsConnection:e,playerId:r,opponentId:s}){let[o,i]=(0,l.useState)(null),[d,u]=(0,l.useState)(!0),[m,x]=(0,l.useState)(0),[h,p]=(0,l.useState)(0),[f]=(0,l.useState)(5),[g,b]=(0,l.useState)(null),[v,j]=(0,l.useState)(null);return v?(console.log("Rendering duel results:",v),(0,t.jsx)("div",{className:"min-h-screen",children:(0,t.jsx)(c,{results:v,playerId:r,opponentId:s})})):d?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Esperando al oponente..."}),(0,t.jsx)("p",{className:"text-gray-500 mt-2",children:"El duelo comenzar\xe1 cuando ambos jugadores est\xe9n listos"})]})}):o?(0,t.jsx)("div",{className:"min-h-screen flex flex-col",children:(0,t.jsx)("main",{className:"mx-auto px-4 py-6 flex-grow container",children:(0,t.jsxs)("div",{className:"mx-auto max-w-3xl",children:[g&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-100 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-700",children:g})}),(0,t.jsx)(n,{title:"Duelo de Preguntas",opponent:s,playerProgress:m,opponentProgress:h,totalQuestions:f}),(0,t.jsx)(a,{questionNumber:m+1,totalQuestions:f,question:o.text,options:o.options.map((e,r)=>({letter:String.fromCharCode(65+r),text:e})),onAnswerSelect:r=>{if(e&&o)try{e.send(JSON.stringify({type:"answer",questionId:o.id,answer:r})),x(e=>e+1),b(null)}catch(e){console.error("Error sending answer:",e),b("Error al enviar la respuesta")}}},o.id)]})})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Esperando la siguiente pregunta..."}),g&&(0,t.jsx)("p",{className:"text-red-500 mt-2",children:g})]})})}var m=s(31353),x=s(79826),h=s(4363),p=s(42146),f=s(20236),g=s(8829),b=s(33009),v=["refetch","reobserve","fetchMore","updateQuery","startPolling","stopPolling","subscribeToMore"],j=s(15728);let y=(0,x.J1)`
  query GetUserByEmail($email: String!) {
    getUserByEmail(email: $email) {
      id
      username
      email
      fullName
      avatar
      role
      createdAt
      updatedAt
    }
  }
`,N=(0,x.J1)`
  mutation RequestDuel($input: RequestDuelInput!) {
    requestDuel(input: $input) {
      duelId
      message
    }
  }
`,w=(0,x.J1)`
  mutation AcceptDuel($input: AcceptDuelInput!) {
    acceptDuel(input: $input) {
      duelId
      message
    }
  }
`;var k=s(15787),C=s(30474),E=s(71142);function I(){let{user:e}=(0,m.$)(),{searchUserByEmail:r,foundUser:s,searchLoading:a,searchError:n,requestDuel:o,requestLoading:d,requestError:c,acceptDuel:x,acceptLoading:E,acceptError:I,error:S}=function(){let{searchUserByEmail:e,loading:r,error:s,user:t}=function(){var e,r,s,t,l,a,n,o,i,d,c,u,m,x,j,N,w,k,C,E,I,S;let[P,{loading:D,error:_,data:q}]=(e={errorPolicy:"all",fetchPolicy:"cache-and-network"},s=p.useRef(void 0),t=p.useRef(void 0),l=p.useRef(void 0),n=null!=(r=null==(a=(0,f.l)(e,s.current||{}))?void 0:a.query)?r:y,t.current=e,l.current=n,o=(0,h.Cl)((0,h.Cl)({},a),{skip:!s.current}),d=(i=(0,g.SX)(n,o)).obsQueryFields,c=i.result,u=i.client,m=i.resultData,x=i.observable,j=i.onQueryExecuted,N=x.options.initialFetchPolicy||(0,g.kk)(o.defaultOptions,u.defaultOptions),w=p.useReducer(function(e){return e+1},0)[1],k=p.useMemo(function(){for(var e={},r=0;r<v.length;r++)!function(r){var t=d[r];e[r]=function(){return s.current||(s.current=Object.create(null),w()),t.apply(this,arguments)}}(v[r]);return e},[w,d]),C=!!s.current,E=p.useMemo(function(){return(0,h.Cl)((0,h.Cl)((0,h.Cl)({},c),k),{called:C})},[c,k,C]),I=p.useCallback(function(e){s.current=e?(0,h.Cl)((0,h.Cl)({},e),{fetchPolicy:e.fetchPolicy||N}):{fetchPolicy:N};var r,a,o,i,d,c,p,b,v,y=(0,f.l)(t.current,(0,h.Cl)({query:l.current},s.current)),w=(r=m,a=x,o=u,i=n,d=(0,h.Cl)((0,h.Cl)({},y),{skip:!1}),c=j,p=d.query||i,b=(0,g.Er)(o,p,d,!1)(a),v=a.reobserveAsConcast((0,g.t_)(a,o,d,b)),c(b),new Promise(function(e){var s;v.subscribe({next:function(e){s=e},error:function(){e((0,g.$X)(a.getCurrentResult(),r.previousData,a,o))},complete:function(){e((0,g.$X)(a.maskResult(s),r.previousData,a,o))}})})).then(function(e){return Object.assign(e,k)});return w.catch(function(){}),w},[u,n,k,N,x,m,j]),S=p.useRef(I),(0,b.E)(function(){S.current=I}),[p.useCallback(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return S.current.apply(S,e)},[]),E]);return{searchUserByEmail:async e=>{try{let{data:r}=await P({variables:{email:e}});return r?.getUserByEmail||null}catch(e){throw console.error("Error searching user by email:",e),e}},loading:D,error:_?.message||null,user:q?.getUserByEmail||null}}(),{requestDuel:l,loading:a,error:n}=function(){let[e,{loading:r,error:s}]=(0,j.n)(N,{errorPolicy:"all"});return{requestDuel:async(r,s)=>{try{let{data:t}=await e({variables:{input:{requesterId:r,opponentId:s}}});return t.requestDuel}catch(e){throw console.error("Error requesting duel:",e),e}},loading:r,error:s?.message||null}}(),{acceptDuel:o,loading:i,error:d}=function(){let[e,{loading:r,error:s}]=(0,j.n)(w,{errorPolicy:"all"});return{acceptDuel:async r=>{try{let{data:s}=await e({variables:{input:{duelId:r}}});return s.acceptDuel}catch(e){throw console.error("Error accepting duel:",e),e}},loading:r,error:s?.message||null}}();return{searchUserByEmail:e,foundUser:t,searchLoading:r,searchError:s,requestDuel:l,requestLoading:a,requestError:n,acceptDuel:o,acceptLoading:i,acceptError:d,isLoading:r||a||i,error:s||n||d}}(),[P,D]=(0,l.useState)(null),[_,q]=(0,l.useState)(null),[$,R]=(0,l.useState)(null),[M,A]=(0,l.useState)(null),[W,O]=(0,l.useState)(!1),[B,L]=(0,l.useState)({duelId:"",playerId:e?.id||""}),[z,G]=(0,l.useState)(""),[U,V]=(0,l.useState)([]),F=async()=>{if(!z)return void q("Por favor, ingresa el correo del oponente");try{await r(z)?q(null):q("No se encontr\xf3 ning\xfan usuario con ese correo")}catch(e){q(e instanceof Error?e.message:"Error al buscar el usuario")}},J=async()=>{if(console.log("Current user state:",e),console.log("User ID:",e?.id),e&&!e.id){console.log("User exists but ID is missing. Full user object:",JSON.stringify(e));let r=null;for(let s of["_id","userId","uid","userID"])if(e[s]){console.log(`Found alternative ID field: ${s} with value: ${String(e[s])}`),r=String(e[s]);break}if(r&&s){try{let e=await o(r,s.id);if(D(e),q(null),L(r=>({...r,duelId:e.duelId})),e.duelId){$&&$.close();let s=new WebSocket(`ws://localhost:8002/ws/duels/${e.duelId}/${r}`);s.onopen=()=>{q(null),O(!0)},s.onerror=e=>{q("Error en la conexi\xf3n WebSocket"),console.error("WebSocket error:",e)},s.onclose=()=>{_&&O(!1)},R(s)}}catch(e){q(e instanceof Error?e.message:"Error al solicitar el duelo"),D(null)}return}q("Tu sesi\xf3n existe pero falta el ID de usuario. Intenta cerrar sesi\xf3n y volver a iniciar.");return}if(!e?.id)return void q("Debes iniciar sesi\xf3n para solicitar un duelo");if(!s)return void q("Debes buscar y seleccionar un oponente primero");try{let r=String(e.id),t=await o(r,s.id);if(D(t),q(null),L(e=>({...e,duelId:t.duelId})),t.duelId&&e?.id){$&&$.close();let r=new WebSocket(`ws://localhost:8002/ws/duels/${t.duelId}/${e.id}`);r.onopen=()=>{q(null),O(!0)},r.onerror=e=>{q("Error en la conexi\xf3n WebSocket"),console.error("WebSocket error:",e)},r.onclose=()=>{_&&O(!1)},R(r)}}catch(e){q(e instanceof Error?e.message:"Error al solicitar el duelo"),D(null)}},Q=e=>{X(e),V(r=>r.filter(r=>r.duelId!==e))},T=e=>{V(r=>r.filter(r=>r.duelId!==e))},X=async r=>{if(!r)return void q("Por favor, ingresa el ID del duelo");try{let s=await x(r);if(D(s),q(null),L(e=>({...e,duelId:r})),r&&e?.id){$&&$.close();let s=new WebSocket(`ws://localhost:8002/ws/duels/${r}/${e.id}`);s.onopen=()=>{q(null),O(!0)},s.onerror=e=>{q("Error en la conexi\xf3n WebSocket"),console.error("WebSocket error:",e)},s.onclose=()=>{_&&O(!1)},R(s)}}catch(e){q(e instanceof Error?e.message:"Error al aceptar el duelo")}};return(0,t.jsx)("div",{className:"container mx-auto p-4",children:W?(0,t.jsx)(u,{wsConnection:$,playerId:B.playerId,opponentId:s?.id||"user_002"}):(0,t.jsxs)("div",{className:"mx-auto px-4 py-8 container",children:[(0,t.jsxs)("p",{className:"text-3xl font-bold text-emerald-700 mb-6 text-center flex items-center justify-center gap-2",children:[(0,t.jsx)(i.A,{className:"w-8 h-8"}),"Duelos Acad\xe9micos"]}),(0,t.jsxs)("div",{className:"lg:flex-row flex flex-col gap-8",children:[(0,t.jsx)("div",{className:"lg:w-1/2 bg-gradient-to-br rounded-xl shadow-xl from-emerald-500 to-emerald-700 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"items-center justify-center p-6 flex",children:(0,t.jsx)(C.default,{src:"/images/duels.webp",alt:"Duelo",width:300,height:400,className:"object-cover transform hover:scale-105 transition duration-300 rounded-lg h-64"})}),(0,t.jsxs)("div",{className:"text-white p-6",children:[(0,t.jsx)("p",{className:"text-2xl font-bold mb-4",children:"\xa1Desaf\xeda a tus compa\xf1eros!"}),(0,t.jsx)("p",{className:"mb-4",children:"Pon a prueba tus conocimientos y demuestra qui\xe9n es el mejor en tu clase. Gana monedas, experiencia y desbloquea logros especiales."}),(0,t.jsxs)("div",{className:"bg-white/20 rounded-lg mb-4 backdrop-blur-sm p-4",children:[(0,t.jsx)("p",{className:"font-bold text-xl mb-2",children:"Beneficios de los Duelos"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,t.jsx)("li",{children:"Gana hasta 50 monedas por victoria"}),(0,t.jsx)("li",{children:"Sube en el ranking de tu clase"}),(0,t.jsx)("li",{children:"Desbloquea insignias exclusivas"}),(0,t.jsx)("li",{children:"Refuerza tu aprendizaje mientras juegas"})]})]})]})]})}),(0,t.jsxs)("div",{className:"lg:w-1/2 bg-white rounded-xl shadow-lg border border-emerald-100 p-6 flex flex-col justify-center",children:[(0,t.jsxs)("div",{className:"items-center mb-6 flex",children:[(0,t.jsx)("div",{className:"bg-emerald-100 rounded-full mr-3 p-2",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})})}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:"Desafiar a un Estudiante"})]}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),F()},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"opponentEmail",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Correo del estudiante"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"pl-3 items-center absolute inset-y-0 left-0 flex pointer-events-none",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,t.jsx)("input",{name:"opponentEmail",type:"email",value:z,onChange:e=>G(e.target.value),placeholder:"estudiante@universidad.edu",className:"border border-gray-300 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition pl-10 w-full py-3 rounded-lg",id:"opponentEmail"})]})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(k.default,{type:"submit",disabled:a,className:"hover:bg-emerald-700 transition duration-300 hover:shadow-lg transform hover:-translate-y-1 w-full bg-emerald-600 text-white font-bold py-3 rounded-lg shadow-md",children:a?"Buscando...":"Buscar Estudiante"})})]}),s&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-emerald-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-bold text-emerald-800 mb-2",children:"Oponente Encontrado:"}),(0,t.jsxs)("p",{className:"text-gray-700",children:["Nombre: ",s.fullName||s.username]}),(0,t.jsxs)("p",{className:"text-gray-700",children:["Correo: ",s.email]}),(0,t.jsxs)("p",{className:"text-gray-700",children:["Rol: ",s.role]}),(0,t.jsx)(k.default,{onClick:J,disabled:d,className:"mt-4 hover:bg-emerald-700 transition duration-300 hover:shadow-lg transform hover:-translate-y-1 w-full bg-emerald-600 text-white font-bold py-3 rounded-lg shadow-md",children:d?"Solicitando...":"Solicitar Duelo"})]}),P&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-emerald-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-bold text-emerald-800 mb-2",children:"Duelo Solicitado:"}),(0,t.jsxs)("p",{className:"text-gray-700",children:["ID del Duelo: ",P.duelId]}),(0,t.jsxs)("p",{className:"text-gray-700",children:["Mensaje: ",P.message]})]}),U.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-700 mb-2",children:"Desaf\xedos Pendientes"}),(0,t.jsx)("div",{className:"space-y-3",children:U.map(e=>(0,t.jsxs)("div",{className:"justify-between items-center bg-emerald-50 rounded-lg flex p-3",children:[(0,t.jsx)("div",{className:"items-center flex",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-800",children:"\xa1Desaf\xedo recibido!"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["ID: ",e.duelId]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Recibido:"," ",new Date(e.timestamp).toLocaleString()]})]})}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>Q(e.duelId),disabled:E,className:"hover:bg-emerald-600 bg-emerald-500 text-white px-3 py-1 rounded-md text-sm disabled:opacity-50",children:E?"Aceptando...":"Aceptar"}),(0,t.jsx)("button",{onClick:()=>T(e.duelId),className:"hover:bg-gray-300 bg-gray-200 text-gray-700 px-3 py-1 rounded-md text-sm",children:"Rechazar"})]})]},e.duelId))})]}),_&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-red-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-bold text-red-700 mb-2",children:"Error:"}),(0,t.jsx)("p",{className:"text-red-600",children:_})]})]})]})]})})}function S(){return(0,t.jsx)(E.A,{children:(0,t.jsx)(I,{})})}},19389:(e,r,s)=>{Promise.resolve().then(s.bind(s,19241))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},46055:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>l});var t=s(31658);let l=async e=>[{type:"image/x-icon",sizes:"128x128",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},58972:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/carlos/dev/CourseClash/frontend/app/duelos/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/carlos/dev/CourseClash/frontend/app/duelos/page.tsx","default")},61222:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var t=s(65239),l=s(48088),a=s(88170),n=s.n(a),o=s(30893),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(r,i);let d={children:["",{children:["duelos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58972)),"/home/carlos/dev/CourseClash/frontend/app/duelos/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/home/carlos/dev/CourseClash/frontend/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,35037)),"/home/carlos/dev/CourseClash/frontend/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/carlos/dev/CourseClash/frontend/app/duelos/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/duelos/page",pathname:"/duelos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71142:(e,r,s)=>{"use strict";s.d(r,{A:()=>o});var t=s(60687);s(43210);var l=s(16189),a=s(31353),n=s(82136);function o({children:e,requiredRole:r}){(0,l.useRouter)();let{user:s,isLoading:o,isAuthenticated:i,isInitialized:d}=(0,a.$)();return!d||o?(0,t.jsx)(n.A,{}):i&&s&&(!r||s.role===r)?(0,t.jsx)(t.Fragment,{children:e}):null}},79551:e=>{"use strict";e.exports=require("url")}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,395,658,164],()=>s(61222));module.exports=t})();